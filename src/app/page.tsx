'use client'
import React from 'react';
import Footer from '@/components/footer'
import Image from 'next/image'
import BookList from './Books';
import { ToastContainer } from "react-toastify";
import "react-toastify/dist/ReactToastify.css";
import { getAllBooks } from '@/services';


export default function Home() {
  const [allBooks, setBooks] = React.useState([]);
  const [loading, setLoading] = React.useState(false);

  React.useEffect(() => {
		async function fetchData() {
      setLoading(true);
			const books = await getAllBooks();
			setBooks(books as any);
      setLoading(false);

		}
		fetchData();

	}, []);

  if (loading) {
    return (
      <div className="spinner" style={{
        display: 'flex',
        justifyContent: 'center',
        alignItems: 'center',
        height: '100vh',
      }}>
          <svg width="1324" height="218" viewBox="0 0 1324 218" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M53.6932 176.045C44.8295 176.045 37.0526 173.936 30.3622 169.717C23.7145 165.499 18.5156 159.597 14.7656 152.011C11.0582 144.426 9.20455 135.562 9.20455 125.42C9.20455 115.193 11.0582 106.266 14.7656 98.6378C18.5156 91.0099 23.7145 85.0866 30.3622 80.8679C37.0526 76.6491 44.8295 74.5398 53.6932 74.5398C62.5568 74.5398 70.3125 76.6491 76.9602 80.8679C83.6506 85.0866 88.8494 91.0099 92.5568 98.6378C96.3068 106.266 98.1818 115.193 98.1818 125.42C98.1818 135.562 96.3068 144.426 92.5568 152.011C88.8494 159.597 83.6506 165.499 76.9602 169.717C70.3125 173.936 62.5568 176.045 53.6932 176.045ZM53.6932 162.494C60.4261 162.494 65.9659 160.768 70.3125 157.317C74.6591 153.865 77.8764 149.327 79.9645 143.702C82.0526 138.077 83.0966 131.983 83.0966 125.42C83.0966 118.858 82.0526 112.743 79.9645 107.075C77.8764 101.408 74.6591 96.8267 70.3125 93.3324C65.9659 89.8381 60.4261 88.0909 53.6932 88.0909C46.9602 88.0909 41.4205 89.8381 37.0739 93.3324C32.7273 96.8267 29.5099 101.408 27.4219 107.075C25.3338 112.743 24.2898 118.858 24.2898 125.42C24.2898 131.983 25.3338 138.077 27.4219 143.702C29.5099 149.327 32.7273 153.865 37.0739 157.317C41.4205 160.768 46.9602 162.494 53.6932 162.494ZM135.272 138.205L135.016 119.54H138.084L181.039 75.8182H199.703L153.936 122.097H152.658L135.272 138.205ZM121.209 174V43.0909H136.294V174H121.209ZM183.596 174L145.243 125.42L155.982 114.938L202.772 174H183.596ZM221.165 174V43.0909H236.25V91.4148H237.528C238.636 89.7102 240.17 87.5369 242.131 84.8949C244.134 82.2102 246.989 79.8239 250.696 77.7358C254.446 75.6051 259.517 74.5398 265.909 74.5398C274.176 74.5398 281.463 76.6065 287.77 80.7401C294.077 84.8736 298.999 90.733 302.536 98.3182C306.072 105.903 307.841 114.852 307.841 125.165C307.841 135.562 306.072 144.575 302.536 152.203C298.999 159.788 294.098 165.669 287.834 169.845C281.57 173.979 274.347 176.045 266.165 176.045C259.858 176.045 254.808 175.001 251.016 172.913C247.223 170.783 244.304 168.375 242.259 165.69C240.213 162.963 238.636 160.705 237.528 158.915H235.739V174H221.165ZM235.994 124.909C235.994 132.324 237.081 138.865 239.254 144.533C241.428 150.158 244.602 154.568 248.778 157.764C252.955 160.918 258.068 162.494 264.119 162.494C270.426 162.494 275.689 160.832 279.908 157.509C284.169 154.142 287.365 149.625 289.496 143.957C291.669 138.247 292.756 131.898 292.756 124.909C292.756 118.006 291.69 111.784 289.56 106.244C287.472 100.662 284.297 96.2514 280.036 93.0128C275.817 89.7315 270.511 88.0909 264.119 88.0909C257.983 88.0909 252.827 89.6463 248.651 92.7571C244.474 95.8253 241.321 100.129 239.19 105.669C237.06 111.166 235.994 117.58 235.994 124.909ZM370.803 176.045C361.939 176.045 354.162 173.936 347.472 169.717C340.824 165.499 335.625 159.597 331.875 152.011C328.168 144.426 326.314 135.562 326.314 125.42C326.314 115.193 328.168 106.266 331.875 98.6378C335.625 91.0099 340.824 85.0866 347.472 80.8679C354.162 76.6491 361.939 74.5398 370.803 74.5398C379.666 74.5398 387.422 76.6491 394.07 80.8679C400.76 85.0866 405.959 91.0099 409.666 98.6378C413.416 106.266 415.291 115.193 415.291 125.42C415.291 135.562 413.416 144.426 409.666 152.011C405.959 159.597 400.76 165.499 394.07 169.717C387.422 173.936 379.666 176.045 370.803 176.045ZM370.803 162.494C377.536 162.494 383.075 160.768 387.422 157.317C391.768 153.865 394.986 149.327 397.074 143.702C399.162 138.077 400.206 131.983 400.206 125.42C400.206 118.858 399.162 112.743 397.074 107.075C394.986 101.408 391.768 96.8267 387.422 93.3324C383.075 89.8381 377.536 88.0909 370.803 88.0909C364.07 88.0909 358.53 89.8381 354.183 93.3324C349.837 96.8267 346.619 101.408 344.531 107.075C342.443 112.743 341.399 118.858 341.399 125.42C341.399 131.983 342.443 138.077 344.531 143.702C346.619 149.327 349.837 153.865 354.183 157.317C358.53 160.768 364.07 162.494 370.803 162.494ZM478.205 176.045C469.341 176.045 461.564 173.936 454.874 169.717C448.226 165.499 443.027 159.597 439.277 152.011C435.57 144.426 433.716 135.562 433.716 125.42C433.716 115.193 435.57 106.266 439.277 98.6378C443.027 91.0099 448.226 85.0866 454.874 80.8679C461.564 76.6491 469.341 74.5398 478.205 74.5398C487.069 74.5398 494.824 76.6491 501.472 80.8679C508.162 85.0866 513.361 91.0099 517.069 98.6378C520.819 106.266 522.694 115.193 522.694 125.42C522.694 135.562 520.819 144.426 517.069 152.011C513.361 159.597 508.162 165.499 501.472 169.717C494.824 173.936 487.069 176.045 478.205 176.045ZM478.205 162.494C484.938 162.494 490.478 160.768 494.824 157.317C499.171 153.865 502.388 149.327 504.476 143.702C506.564 138.077 507.608 131.983 507.608 125.42C507.608 118.858 506.564 112.743 504.476 107.075C502.388 101.408 499.171 96.8267 494.824 93.3324C490.478 89.8381 484.938 88.0909 478.205 88.0909C471.472 88.0909 465.932 89.8381 461.586 93.3324C457.239 96.8267 454.022 101.408 451.934 107.075C449.846 112.743 448.801 118.858 448.801 125.42C448.801 131.983 449.846 138.077 451.934 143.702C454.022 149.327 457.239 153.865 461.586 157.317C465.932 160.768 471.472 162.494 478.205 162.494ZM559.783 138.205L559.528 119.54H562.596L605.55 75.8182H624.215L578.448 122.097H577.17L559.783 138.205ZM545.721 174V43.0909H560.806V174H545.721ZM608.107 174L569.755 125.42L580.494 114.938L627.283 174H608.107ZM713.176 97.8068L699.625 101.642C698.773 99.3835 697.516 97.1889 695.854 95.0582C694.235 92.8849 692.019 91.0952 689.206 89.6889C686.394 88.2827 682.793 87.5795 678.404 87.5795C672.395 87.5795 667.388 88.9645 663.382 91.7344C659.419 94.4616 657.438 97.9347 657.438 102.153C657.438 105.903 658.801 108.865 661.529 111.038C664.256 113.212 668.517 115.023 674.313 116.472L688.887 120.051C697.665 122.182 704.206 125.442 708.51 129.831C712.814 134.178 714.966 139.781 714.966 146.642C714.966 152.267 713.347 157.295 710.108 161.727C706.912 166.159 702.438 169.653 696.685 172.21C690.932 174.767 684.242 176.045 676.614 176.045C666.6 176.045 658.311 173.872 651.749 169.526C645.186 165.179 641.032 158.83 639.284 150.477L653.603 146.898C654.966 152.182 657.544 156.145 661.337 158.787C665.172 161.429 670.179 162.75 676.358 162.75C683.39 162.75 688.972 161.259 693.105 158.276C697.282 155.25 699.37 151.628 699.37 147.409C699.37 144 698.176 141.145 695.79 138.844C693.404 136.5 689.739 134.753 684.796 133.602L668.432 129.767C659.441 127.636 652.836 124.334 648.617 119.859C644.441 115.342 642.353 109.696 642.353 102.92C642.353 97.3807 643.908 92.4801 647.019 88.2188C650.172 83.9574 654.455 80.6122 659.867 78.1832C665.321 75.7543 671.5 74.5398 678.404 74.5398C688.12 74.5398 695.748 76.6705 701.287 80.9318C706.87 85.1932 710.833 90.8182 713.176 97.8068ZM752.759 114.938V174H737.674V43.0909H752.759V91.1591H754.038C756.339 86.0881 759.79 82.0611 764.393 79.0781C769.038 76.0526 775.217 74.5398 782.93 74.5398C789.62 74.5398 795.479 75.8821 800.508 78.5668C805.536 81.2088 809.435 85.2784 812.205 90.7756C815.018 96.2301 816.424 103.176 816.424 111.614V174H801.339V112.636C801.339 104.838 799.315 98.8082 795.266 94.5469C791.261 90.2429 785.7 88.0909 778.583 88.0909C773.64 88.0909 769.208 89.1349 765.288 91.223C761.41 93.3111 758.342 96.358 756.083 100.364C753.867 104.369 752.759 109.227 752.759 114.938ZM883.908 176.045C875.044 176.045 867.267 173.936 860.577 169.717C853.929 165.499 848.73 159.597 844.98 152.011C841.273 144.426 839.419 135.562 839.419 125.42C839.419 115.193 841.273 106.266 844.98 98.6378C848.73 91.0099 853.929 85.0866 860.577 80.8679C867.267 76.6491 875.044 74.5398 883.908 74.5398C892.772 74.5398 900.527 76.6491 907.175 80.8679C913.865 85.0866 919.064 91.0099 922.772 98.6378C926.522 106.266 928.397 115.193 928.397 125.42C928.397 135.562 926.522 144.426 922.772 152.011C919.064 159.597 913.865 165.499 907.175 169.717C900.527 173.936 892.772 176.045 883.908 176.045ZM883.908 162.494C890.641 162.494 896.181 160.768 900.527 157.317C904.874 153.865 908.091 149.327 910.179 143.702C912.267 138.077 913.311 131.983 913.311 125.42C913.311 118.858 912.267 112.743 910.179 107.075C908.091 101.408 904.874 96.8267 900.527 93.3324C896.181 89.8381 890.641 88.0909 883.908 88.0909C877.175 88.0909 871.635 89.8381 867.289 93.3324C862.942 96.8267 859.725 101.408 857.637 107.075C855.549 112.743 854.505 118.858 854.505 125.42C854.505 131.983 855.549 138.077 857.637 143.702C859.725 149.327 862.942 153.865 867.289 157.317C871.635 160.768 877.175 162.494 883.908 162.494ZM951.424 210.818V75.8182H965.998V91.4148H967.788C968.896 89.7102 970.43 87.5369 972.39 84.8949C974.393 82.2102 977.248 79.8239 980.955 77.7358C984.705 75.6051 989.776 74.5398 996.168 74.5398C1004.44 74.5398 1011.72 76.6065 1018.03 80.7401C1024.34 84.8736 1029.26 90.733 1032.79 98.3182C1036.33 105.903 1038.1 114.852 1038.1 125.165C1038.1 135.562 1036.33 144.575 1032.79 152.203C1029.26 159.788 1024.36 165.669 1018.09 169.845C1011.83 173.979 1004.61 176.045 996.424 176.045C990.117 176.045 985.067 175.001 981.275 172.913C977.482 170.783 974.563 168.375 972.518 165.69C970.472 162.963 968.896 160.705 967.788 158.915H966.509V210.818H951.424ZM966.254 124.909C966.254 132.324 967.34 138.865 969.513 144.533C971.687 150.158 974.862 154.568 979.038 157.764C983.214 160.918 988.327 162.494 994.379 162.494C1000.69 162.494 1005.95 160.832 1010.17 157.509C1014.43 154.142 1017.62 149.625 1019.75 143.957C1021.93 138.247 1023.01 131.898 1023.01 124.909C1023.01 118.006 1021.95 111.784 1019.82 106.244C1017.73 100.662 1014.56 96.2514 1010.29 93.0128C1006.08 89.7315 1000.77 88.0909 994.379 88.0909C988.242 88.0909 983.086 89.6463 978.91 92.7571C974.734 95.8253 971.58 100.129 969.45 105.669C967.319 111.166 966.254 117.58 966.254 124.909ZM1076.2 114.938V174H1061.11V75.8182H1075.69V91.1591H1076.96C1079.26 86.1733 1082.76 82.1676 1087.45 79.142C1092.13 76.0739 1098.19 74.5398 1105.6 74.5398C1112.25 74.5398 1118.06 75.9034 1123.05 78.6307C1128.04 81.3153 1131.91 85.4062 1134.68 90.9034C1137.45 96.358 1138.84 103.261 1138.84 111.614V174H1123.75V112.636C1123.75 104.923 1121.75 98.9148 1117.75 94.6108C1113.74 90.2642 1108.24 88.0909 1101.25 88.0909C1096.44 88.0909 1092.13 89.1349 1088.34 91.223C1084.59 93.3111 1081.63 96.358 1079.46 100.364C1077.28 104.369 1076.2 109.227 1076.2 114.938ZM1206.04 212.864C1198.75 212.864 1192.48 211.926 1187.24 210.051C1182 208.219 1177.63 205.79 1174.14 202.764C1170.69 199.781 1167.94 196.585 1165.89 193.176L1177.91 184.739C1179.27 186.528 1181 188.574 1183.09 190.875C1185.18 193.219 1188.03 195.243 1191.65 196.947C1195.32 198.695 1200.11 199.568 1206.04 199.568C1213.96 199.568 1220.5 197.651 1225.66 193.815C1230.81 189.98 1233.39 183.972 1233.39 175.79V155.847H1232.11C1231.01 157.636 1229.43 159.852 1227.38 162.494C1225.38 165.094 1222.48 167.416 1218.69 169.462C1214.94 171.464 1209.87 172.466 1203.48 172.466C1195.55 172.466 1188.44 170.591 1182.13 166.841C1175.86 163.091 1170.9 157.636 1167.24 150.477C1163.61 143.318 1161.8 134.625 1161.8 124.398C1161.8 114.341 1163.57 105.584 1167.11 98.1264C1170.64 90.6264 1175.57 84.831 1181.87 80.7401C1188.18 76.6065 1195.47 74.5398 1203.73 74.5398C1210.13 74.5398 1215.2 75.6051 1218.95 77.7358C1222.74 79.8239 1225.64 82.2102 1227.64 84.8949C1229.69 87.5369 1231.26 89.7102 1232.37 91.4148H1233.9V75.8182H1248.48V176.812C1248.48 185.25 1246.56 192.111 1242.73 197.395C1238.93 202.722 1233.82 206.621 1227.38 209.092C1220.99 211.607 1213.88 212.864 1206.04 212.864ZM1205.52 158.915C1211.57 158.915 1216.69 157.53 1220.86 154.76C1225.04 151.99 1228.22 148.006 1230.39 142.807C1232.56 137.608 1233.65 131.386 1233.65 124.142C1233.65 117.068 1232.58 110.825 1230.45 105.413C1228.32 100.001 1225.17 95.7614 1220.99 92.6932C1216.82 89.625 1211.66 88.0909 1205.52 88.0909C1199.13 88.0909 1193.81 89.7102 1189.54 92.9489C1185.32 96.1875 1182.15 100.534 1180.02 105.989C1177.93 111.443 1176.89 117.494 1176.89 124.142C1176.89 130.96 1177.95 136.99 1180.08 142.232C1182.26 147.43 1185.45 151.521 1189.67 154.504C1193.93 157.445 1199.22 158.915 1205.52 158.915Z" fill="white"/>
          <path d="M1245.78 30.9751V24.6364H1275.64V30.9751H1264.51V61H1256.91V30.9751H1245.78ZM1280.56 24.6364H1290.04L1300.05 49.0682H1300.48L1310.5 24.6364H1319.98V61H1312.52V37.3317H1312.22L1302.81 60.8224H1297.73L1288.32 37.2429H1288.02V61H1280.56V24.6364Z" fill="white"/>
          </svg>

        </div>
    );
  }
  return (
    <>
    <ToastContainer />
    <main className="flex min-h-screen flex-col items-center justify-between p-10">
      <div className="z-10 w-full max-w-5xl items-center justify-between font-mono text-sm lg:flex">
      <a
            className="pointer-events-none flex place-items-center gap-2 p-8 lg:pointer-events-auto lg:p-0"
            href="/login"
            target="_blank"
            rel="noopener noreferrer"
          >
        <p className="fixed left-0 top-0 flex w-full justify-center border-b border-gray-300 bg-gradient-to-b from-zinc-200 pb-6 pt-8 backdrop-blur-2xl dark:border-neutral-800 dark:bg-zinc-800/30 dark:from-inherit lg:static lg:w-auto  lg:rounded-xl lg:border lg:bg-gray-200 lg:p-4 lg:dark:bg-zinc-800/30">
          Buy Used / New Books 📚&nbsp;
          {/* <code className="font-mono font-bold">src/app/page.tsx</code> */}
        </p>
        </a>
        <div  className="bottom-0 left-0 flex h-48 w-full items-end justify-center bg-gradient-to-t from-white via-white dark:from-black dark:via-black lg:static lg:h-auto lg:w-auto lg:bg-none">
          <a
            className="pointer-events-none flex place-items-center gap-2 p-8 lg:pointer-events-auto lg:p-0"
            href="/login"
            target="_blank"
            rel="noopener noreferrer"
          >
            {/* By {" "} */}
            <p style={{ color: 'lightblue' }} className="fixed left-0 top-0 flex w-full justify-center border-b border-gray-300 bg-gradient-to-b from-zinc-200 pb-6 pt-8 backdrop-blur-2xl dark:border-neutral-800 dark:bg-zinc-800/30 dark:from-inherit lg:static lg:w-auto  lg:rounded-xl lg:border lg:bg-gray-200 lg:p-4 lg:dark:bg-zinc-800/30">
              @okbookshopng&nbsp;
            </p>
          </a>
        </div>
      </div>

      <div style={{marginTop: 50}} className="relative flex place-items-center before:absolute before:h-[300px] before:w-[480px] before:-translate-x-1/2 before:rounded-full before:bg-gradient-radial before:from-white before:to-transparent before:blur-2xl before:content-[''] after:absolute after:-z-20 after:h-[180px] after:w-[240px] after:translate-x-1/3 after:bg-gradient-conic after:from-sky-200 after:via-blue-200 after:blur-2xl after:content-[''] before:dark:bg-gradient-to-br before:dark:from-transparent before:dark:to-blue-700 before:dark:opacity-10 after:dark:from-sky-900 after:dark:via-[#0141ff] after:dark:opacity-40 before:lg:h-[360px]">
      <a
            className=""
            href="/login"
            // target="_blank"
            // rel="noopener noreferrer"
          >
        <Image
          className="relative dark:drop-shadow-[0_0_0.3rem_#ffffff70] dark:invert"
          src="/discover.svg"
          alt="Next.js Logo"
          width={800}
          height={37}
          priority />
          </a>
      </div>

      <div style={{marginTop: 50}}>
      <BookList books={allBooks} />
      </div>

    </main>
    <Footer />
    </>
  )
}
